<!DOCTYPE html>
<html>
  <head>
    <meta name="google-site-verification" content="vPLfvmVSeTNblZy_aIhUxvvqd1CAI52lBSX2BhHMCww" />
    <title>Fix for "exit status 4" when writing Primitive Gif – Chris Wong – Comp/Data Sci @UC Berkeley</title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="This is just a quick fix for a problem I ran into while trying to use Primitive
on Windows. While trying to create a gif, you might run into a message like this:

writing test.gif
2018/06/08 14:07:20 exit status 4


" />
    <meta property="og:description" content="This is just a quick fix for a problem I ran into while trying to use Primitive
on Windows. While trying to create a gif, you might run into a message like this:

writing test.gif
2018/06/08 14:07:20 exit status 4


" />
    
    <meta name="author" content="Chris Wong" />

    
    <meta property="og:title" content="Fix for "exit status 4" when writing Primitive Gif" />
    <meta property="twitter:title" content="Fix for "exit status 4" when writing Primitive Gif" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Chris Wong - Comp/Data Sci @UC Berkeley" href="/feed.xml" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://i.imgur.com/FuNGkx1.png" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Chris Wong</a></h1>
            <p class="site-description">Comp/Data Sci @UC Berkeley</p>
          </div>

          <nav>
            <a href="/">Home</a>
            <a href="https://drive.google.com/file/d/1XxGLQxflwiz7mFxeYCGHuQDCHGZpQrLQ/view?usp=sharing" target="_blank" rel="noopener noreferrer"> Résumé
            </a>
            <a href="/portfolio">Portfolio</a>
            <a href="/about">About</a>
            <a href="/berkeley-lf-page">Lost+Found</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <article class="post">
    <div class="flex-container">
      
      <a href="/images/primitive-fix/campanile.gif">
        <img src="/images/primitive-fix/campanile.gif" width="100" height=auto>
      </a>
      
      <div class="text-preview">
      <h1>Fix for "exit status 4" when writing Primitive Gif</h1>
      <div class="date">
        June  8, 2018
      </div>
        <i>Tags:</i> Go, Bugfix, 2018
      </div>
  </div>

  <div class="entry">
    <p>This is just a quick fix for a problem I ran into while trying to use <a href="https://github.com/fogleman/primitive">Primitive</a>
on Windows. While trying to create a gif, you might run into a message like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>writing test.gif
2018/06/08 14:07:20 <span class="nb">exit </span>status 4
</code></pre></div></div>

<!--more-->

<ol>
  <li>
    <p>Make sure that you have <a href="[https://www.imagemagick.org/script/download.php">ImageMagick</a> installed.</p>
  </li>
  <li>
    <p>Locate the “utils.go” file in the source for primitive. On my computer it was located at <code class="highlighter-rouge">C:\Users\Me\go\src\github.com\fogleman\primitive\primitive\utils.go</code></p>
  </li>
  <li>Look for this section:
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     args := []string{
     "-loop", "0",
     "-delay", fmt.Sprint(delay),
     filepath.Join(dir, "*.png"),
     "-delay", fmt.Sprint(lastDelay - delay),
     filepath.Join(dir, fmt.Sprintf("%06d.png", len(frames)-1)),
     path,
 }
 cmd := exec.Command("convert", args...)
</code></pre></div>    </div>
  </li>
  <li>Move <code class="highlighter-rouge">"convert"</code> to the beginning of args, and change the command name to <code class="highlighter-rouge">"magick"</code>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     args := []string{
     "convert",
     "-loop", "0",
     "-delay", fmt.Sprint(delay),
     filepath.Join(dir, "*.png"),
     "-delay", fmt.Sprint(lastDelay - delay),
     filepath.Join(dir, fmt.Sprintf("%06d.png", len(frames)-1)),
     path,
 }
 cmd := exec.Command("magick", args...)
</code></pre></div>    </div>
  </li>
  <li>Reinstall primitive with <code class="highlighter-rouge">go install github.com/fogleman/primitive</code> (or whatever your path is in go\src)</li>
</ol>

<p>Basically, to create the gifs primitive tries to use the <code class="highlighter-rouge">magick convert</code> command.
However, windows has a default command called <code class="highlighter-rouge">convert</code> that gets used instead.
These changes should fix the problem.</p>

<p><img src="/images/primitive-fix/campanile.jpg" alt="" />
<img src="/images/primitive-fix/campanile.gif" alt="" /></p>

  </div>

  <div class="date">
    Written on June  8, 2018
  </div>

  
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          



<a href="https://github.com/ckw017"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/chriswong21"><i class="svg-icon linkedin"></i></a>





<br>
        </footer>
      </div>
    </div>

    

  </body>
</html>
